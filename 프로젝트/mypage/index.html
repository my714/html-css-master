<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>MY PAGE</title>

    <link rel="stylesheet" href="./css/jquery.fullPage.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap"
      rel="stylesheet"
    />

    <style>
      @font-face {
        font-family: "Cafe24Decoshadow";
        src: url("https://fastly.jsdelivr.net/gh/projectnoonnu/2405-3@1.1/Cafe24Decoshadow.woff2")
          format("woff2");
        font-weight: normal;
        font-style: normal;
      }
      @font-face {
        font-family: "YOnepickTTF-Bold";
        src: url("https://fastly.jsdelivr.net/gh/projectnoonnu/2410-1@1.0/YOnepickTTF-Bold.woff2")
          format("woff2");
        font-weight: 700;
        font-style: normal;
      }
      @font-face {
        font-family: "Cafe24Decoline";
        src: url("https://fastly.jsdelivr.net/gh/projectnoonnu/2405-3@1.1/Cafe24Decoline.woff2")
          format("woff2");
        font-weight: normal;
        font-style: normal;
      }
      @font-face {
        font-family: "omyu_pretty";
        src: url("https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2304-01@1.0/omyu_pretty.woff2")
          format("woff2");
        font-weight: normal;
        font-style: normal;
      }
      @font-face {
        font-family: "HakgyoansimBombanghakR";
        src: url("https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2307-2@1.0/HakgyoansimBombanghakR.woff2")
          format("woff2");
        font-weight: normal;
        font-style: normal;
      }
      @keyframes fadeInUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      @keyframes blink {
        50% {
          opacity: 0;
        }
      }
      * {
        margin: 0;
        padding: 0;
      }
      a {
        text-decoration: none;
        color: #fff;
      }
      body {
        margin: 0;
        overflow-x: hidden;
      }

      .section {
        height: 100vh;
        position: relative;
        overflow: hidden;
      }

      .section:nth-child(1) {
        background: url(./img/bg01.png) center/cover;
        background-repeat: no-repeat;
      }

      header {
        width: 1400px;
        margin: 0 auto;
        position: relative;
        z-index: 1;
      }

      .title01 {
        margin-top: 200px;
      }

      .title01 h1 {
        font-family: "Cafe24Decoshadow";
        font-size: 150px;
        line-height: 1.5;
        letter-spacing: 3px;
      }

      .title01 h1 span {
        display: inline-block;
        background: linear-gradient(120deg, #fbc2eb, #d3afa7);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        opacity: 0;
        transform: translateY(20px);
      }

      .title01 h1 span.animate {
        animation: fadeInUp 1s ease forwards;
      }

      .title01 h1 span:nth-child(2),
      .title01 h1 span:nth-child(4),
      .title01 h1 span:nth-child(5),
      .title01 h1 span:nth-child(6) {
        font-size: 50px;
      }

      .title01 h1 span:last-child {
        animation-delay: 1s;
      }

      .text_sakura {
        position: absolute;
        top: -100px;
        left: -200px;
        z-index: 0;
      }

      .line_sakura {
        position: absolute;
        top: 200px;
        left: -50px;
        z-index: 0;
      }

      .tree {
        position: absolute;
        bottom: -220px;
        right: 0;
        width: 800px;
        z-index: 0;
        pointer-events: none;
      }

      .section:nth-child(2) {
        background: url(./img/bg02.png) center/cover;
        background-repeat: no-repeat;
        position: relative;
      }

      .title02 h2 {
        text-align: center;
        line-height: 3;
      }
      .title02 h2 span {
        font-family: "YOnepickTTF-Bold";
        font-size: 100px;
        letter-spacing: -3px;
        background: linear-gradient(95deg, #7fa1e0, #e795ec);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .title02 h2 span {
        display: inline-block;
        opacity: 0;
        transform: translateY(20px);
      }

      .title02 h2 span.animate {
        animation: fadeInUp 1s ease forwards;
      }
      .Profile_line {
        position: absolute;
        top: -20px;
        left: 550px;
        width: 1200px;
      }
      .Profile {
        display: flex;
      }
      .photo {
        margin: 20px;
      }
      .Profile_box {
        text-align: center;
        position: relative;
      }
      .txt_box {
        position: absolute;
        left: -100px;
        top: -50px;
      }
      .txt_con {
        width: 1000px;
        height: 600px;
        z-index: -1;
      }
      .txt {
        color: #5900ce;
        text-align: left;
        font-family: "omyu_pretty";
        font-size: 35px;
        margin: 100px 0 0 150px;
      }
      .txt p:nth-child(2n + 1) {
        color: #9c15eb;
      }

      .typing.active::after {
        content: "|";
        animation: blink 0.7s step-start infinite;
        margin-left: 3px;
        font-weight: bold;
      }

      .typing.done::after {
        content: "";
        animation: none;
      }
      .tree02 {
        position: absolute;
        bottom: 0;
        right: 0;
        z-index: 0;
        pointer-events: none;
      }

      .section:nth-child(3) {
        background: url(./img/bg03.png) center/cover;
        background-repeat: no-repeat;
        color: white;
      }
      .line_h {
        position: absolute;
        top: 20px;
        left: 650px;
        height: 250px;
      }
      .title03 {
        margin-top: 80px;
        position: relative;
      }

      .title03 h3 {
        text-align: center;
        line-height: 1.5;
      }
      .title03 h3 span {
        font-family: "YOnepickTTF-Bold";
        font-size: 100px;
        letter-spacing: -3px;
        background: linear-gradient(90deg, #9d2ee7, #5d43d4, #130d46);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        display: inline-block;
        opacity: 0;
        transform: translateX(0);
      }

      .title03 h3 span.animate-left {
        animation: slideInLeft 2.5s ease forwards;
      }

      .title03 h3 span.animate-right {
        animation: slideInRight 2.5s ease forwards;
      }

      .project {
        width: 1400px;
        margin: 100px auto;
      }

      .project .project_list {
        display: flex;
        align-items: center;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        padding-bottom: 4em;
        margin-bottom: 4rem;
      }

      .project_list ul {
        text-align: center;
        display: flex;
        margin: 0 auto;
        gap: 150px;
      }

      .project_list ul li a {
        display: inline-block;
        text-align: center;
      }

      .project_list ul li span {
        display: block;
        font-size: 15px;
        color: rgba(22, 22, 22, 0.6);
      }

      .project_list ul li p {
        font-family: "omyu_pretty";
        font-size: 30px;
      }

      .project_list ul li p.active {
        color: #130d46;
      }
      .bottom {
        position: relative;
      }
      .bottom .con {
        width: 1400px;
        margin: 0 auto;
        display: flex;
        justify-content: center;
        gap: 50px;
        align-items: center;
        display: none;
        /* 
        position: absolute;
        top: 0;
        left: 0;
         */
      }

      .img_box {
        position: relative;
        width: 1000px;
        height: 500px;
        z-index: 0;
      }

      .img_box .overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 1000px;
        height: 100%;
        background: black;
        opacity: 0.3;
        transition: opacity 0.4s ease;
        z-index: 1;
        border-radius: 5px;
      }

      .img_box img {
        position: relative;
        z-index: 0;
        width: 1000px;
        height: 100%;
        object-fit: cover;
        border-radius: 5px;
        transition: transform 0.4s ease;
      }

      .bottom .link {
        position: relative;
        z-index: 10;
      }

      .bottom .link a {
        display: inline-flex;
        align-items: center;
        border-radius: 2.4rem;
        color: #535252;
        background-image: linear-gradient(to top, #f5e7f0, #cccccc);
        height: 50px;
        padding: 0 16px;
        gap: 8px;
      }

      .bottom .link a:hover {
        background-image: linear-gradient(to top, #f5e7f0, #0f0f0f);
        color: #fff;
      }

      .bottom .link a span {
        font-family: "HakgyoansimBombanghakR";
        font-size: 26px;
      }
      .img_box.bright .overlay {
        opacity: 0;
      }

      .tree03 {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 800px;
        z-index: -1;
      }

      #Butterfly {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 999;
      }
      canvas {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 2;
      }
      #leaf {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 2;
      }
    </style>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="./js/jquery.fullPage.js"></script>
    <script src="./js/scrolloverflow.js"></script>
  </head>
  <body>
    <div id="fullpage">
      <!-- SECTION 1 -->
      <div class="section">
        <header>
          <div class="title01">
            <img src="./img/text_sakura.png" class="text_sakura" alt="벚꽃" />
            <h1>
              <span class="letter">M</span>
              <span class="letter">i</span>
              <span class="letter">Y</span>
              <span class="letter">e</span>
              <span class="letter">o</span>
              <span class="letter">n</span>
              <span class="letter">PORTFOLIO</span>
            </h1>
            <img
              src="./img/line_sakura.png"
              class="line_sakura"
              alt="가로라인"
            />
          </div>
        </header>
        <img src="./img/bg01_tree.png" class="tree" alt="벚나무" />
      </div>

      <!-- SECTION 2 -->
      <div class="section">
        <div class="title02">
          <h2>
            <span>P</span>
            <span>R</span>
            <span>O</span>
            <span>F</span>
            <span>I</span>
            <span>L</span>
            <span>E</span>
          </h2>
          <img
            src="./img/Profile_line.png"
            class="Profile_line"
            alt="프로필라인"
          />
        </div>
        <div class="Profile">
          <div class="photo">
            <img src="./img/Profile.png" class="photo" alt="프로필" />
          </div>
          <div class="Profile_box">
            <div class="txt_box">
              <img src="./img/text_box.png" class="txt_con" alt="텍스트박스" />
            </div>
            <div class="txt">
              <p class="typing" data-text="Name : Jeon Mi Yeon"></p>
              <p class="typing" data-text="Age : 1993. 07. 14"></p>
              <p class="typing" data-text="E-Mail : aldus1365@naver.com"></p>
              <p class="typing" data-text="MBTI : ISTP"></p>
              <p class="typing" data-text="MOTTO : I CAN DO IT"></p>
              <p
                class="typing"
                data-text="'나는 누구든 될 수 있고 무엇이든 할 수 있다.'"
              ></p>
            </div>
          </div>
        </div>

        <img src="./img/bg02_tree.png" class="tree02" alt="나뭇가지" />
      </div>

      <!-- SECTION 3 -->
      <div class="section">
        <div class="work">
          <div class="title03">
            <img src="./img/line3.png" class="line_h" alt="세로라인" />
            <h3>
              <span>WORK</span> <br />
              <span> &nbsp; &nbsp; &nbsp; SPACE</span>
            </h3>
          </div>
        </div>
        <div class="project">
          <div class="project_list">
            <ul>
              <li data-index="0">
                <a href="#">
                  <p class="active">유성온천축제</p>
                </a>
              </li>
              <li data-index="1">
                <a href="#">
                  <p>공차</p>
                </a>
              </li>
              <li data-index="2">
                <a href="#">
                  <p>Layered Memories</p>
                </a>
              </li>
            </ul>
          </div>

          <div class="bottom">
            <div class="con">
              <div class="img_box">
                <span class="overlay"></span>
                <img src="./img/온천축제.png" alt="온천축제" />
              </div>
              <div class="link">
                <a href="#"><span>프로젝트 보러가기</span></a>
              </div>
            </div>
            <!-- 보러가기 클릭시 나타나는 페이지에서의 설명 
              유성온천축제 공식 웹사이트를 기반으로 제작한 클론 프로젝트입니다.
    실제 지역축제 웹사이트의 콘텐츠 구성과 사용자 흐름을 분석하여, 정적인 정보 제공부터 인터랙션 요소까지 클론 및 개선에 초점을 맞췄습니다.
    대상 사이트: 유성온천축제 공식 웹사이트
    특징: 시각적 스타일보다 정보 구조와 동작 방식 구현에 중점
    핵심 포인트: 축제 소개, 일정 안내, 프로그램 소개, 공지사항, 갤러리 등 실제 콘텐츠 흐름을 그대로 재현
    기술 스택 : HTML / CSS / JAVA SCRIPT / Figma / Miricanvas
    목적 : 실존 축제 사이트의 구조 분석과 UI/UX 재구현을 통한 프론트엔드 실습. 
    유성온천축제 공식 웹사이트를 클론하며 지역축제 특화 웹사이트 구조를 학습한 프로젝트로 콘텐츠 중심 웹사이트를 반응형으로 구현한 클론 실습 프로젝트입니다. -->

            <div class="con">
              <div class="img_box">
                <span class="overlay"></span>
                <img src="./img/공차.png" alt="공차" />
              </div>
              <div class="link">
                <a href="#"><span>프로젝트 보러가기</span></a>
              </div>
            </div>

            <div class="con">
              <div class="img_box">
                <span class="overlay"></span>
                <img src="./img/Layered Memories.png" alt="레이어드메모리" />
              </div>
              <div class="link">
                <a href="#"><span>프로젝트 보러가기</span></a>
              </div>
            </div>
          </div>
        </div>
        <!-- - 보러가기 클릭시 나타나는 페이지에서의 설명 "작품 하나하나에 이야기를
        담은, 나만의 디지털 아트 갤러리" 이 웹사이트는 제 가족의 미술 작품을
        기록하고 공유하기 위해 직접 설계한 디지털 포트폴리오 공간입니다.
        웹사이트의 구조와 디자인은 작품이 중심이 되는 전시 공간을 목표로
        설계되었으며, 디지털 아트 특유의 색감과 질감을 자연스럽게 표현할 수
        있도록 단순한 이미지 나열을 넘어 작품의 배경, 의도, 재료와 감정까지 함께
        담아 관람자와의 공감을 이끌어내고자 했습니다. 전체 레이아웃과 색상
        구성은 Layered Memories라는 브랜드의 색깔인 "층이 쌓이는" 느낌과 비슷한
        우주의 행성이 돋보이도록 디자인하였고, 반응형 웹으로 모바일,
        태블릿에서도 감상할 수 있도록 구현했습니다. 사용 기술: HTML, CSS,
        JavaScript 특징: 작품별 상세 설명 페이지 장르/주제별 카테고리 필터
        모바일 반응형 설계 이 홈페이지는 단순한 포트폴리오가 아니라, 나의 시각
        언어를 관람자와 나누는 디지털 전시장입니다. -->

        <img src="./img/bg03_tree.png" class="tree03" alt="벚나무" />
      </div>
    </div>

    <canvas id="Butterfly"></canvas>
    <canvas id="sakura"></canvas>
    <canvas id="leaf"></canvas>

    <script>
      function aniRemove1() {
        document.querySelectorAll(".title01 h1 span").forEach((v, k) => {
          v.style.animationDelay = `0s`;
          v.classList.remove("animate");
        });
      }
      function aniRemove2() {
        document.querySelectorAll(".title02 h2 span").forEach((v, k) => {
          v.style.animationDelay = `0s`;
          v.classList.remove("animate");
        });
      }
      function aniRemove3() {
        document.querySelectorAll(".title03 h3 span").forEach((v, k) => {
          v.style.animationDelay = `0s`;
          v.classList.remove("animate-left", "animate-right");
        });
      }
      document.querySelectorAll(".title01 h1 span").forEach((el, i) => {
        el.style.animationDelay = `${i * 0.2}s`;
        el.classList.add("animate");
      });
      $("#fullpage").fullpage({
        autoScrolling: true,
        scrollOverflow: true,
        afterLoad: function (anchorLink, index) {
          //const index = destination.index;
          console.log(index);
          if (index === 1) {
            document.querySelectorAll(".title01 h1 span").forEach((el, i) => {
              el.style.animationDelay = `${i * 0.2}s`;
              el.classList.add("animate");
            });
            aniRemove2();
          } else if (index === 2) {
            document.querySelectorAll(".title02 h2 span").forEach((el, i) => {
              el.style.animationDelay = `${i * 0.2}s`;
              el.classList.add("animate");
            });
            aniRemove1();
            aniRemove3();
            handleScrollTyping();
          } else if (index === 3) {
            aniRemove1();
            aniRemove2();
            animateWorkTextOnScroll();
          }
        },
        onLeave: function (anchorLink, index) {
          if (index === 2) {
            // 2번째 페이지를 떠날 때
            const paragraphs = document.querySelectorAll(".txt .typing");
            paragraphs.forEach((p) => {
              p.textContent = ""; // 텍스트 초기화
              p.classList.remove("done"); // 상태 클래스 제거
            });
          }
        },
      });

      //마우스 효과
      const butterflyCanvas = document.getElementById("Butterfly");
      const butterflyCtx = butterflyCanvas.getContext("2d");

      butterflyCanvas.width = window.innerWidth;
      butterflyCanvas.height = window.innerHeight;

      window.addEventListener("resize", () => {
        butterflyCanvas.width = window.innerWidth;
        butterflyCanvas.height = window.innerHeight;
      });

      const butterflyImg = new Image();
      butterflyImg.src = "./img/butterfly.png";

      const butterfly = {
        x: window.innerWidth / 2,
        y: window.innerHeight / 2,
        targetX: window.innerWidth / 2,
        targetY: window.innerHeight / 2,
        baseSize: 50,
        size: 50,
        wingPhase: 0,
        flip: false,
      };

      document.addEventListener("mousemove", (e) => {
        butterfly.targetX = e.clientX;
        butterfly.targetY = e.clientY;
        butterfly.flip = e.clientX < butterfly.x;
      });

      function animateButterfly() {
        butterflyCtx.clearRect(
          0,
          0,
          butterflyCanvas.width,
          butterflyCanvas.height
        );

        butterfly.x += (butterfly.targetX - butterfly.x) * 0.1;
        butterfly.y += (butterfly.targetY - butterfly.y) * 0.1;

        butterfly.wingPhase += 0.2;
        butterfly.size = butterfly.baseSize + Math.sin(butterfly.wingPhase) * 8;

        butterflyCtx.save();
        butterflyCtx.translate(butterfly.x, butterfly.y);

        if (butterfly.flip) {
          butterflyCtx.scale(-1, 1);
        }

        butterflyCtx.drawImage(
          butterflyImg,
          -butterfly.size / 2,
          -butterfly.size / 2,
          butterfly.size,
          butterfly.size
        );

        butterflyCtx.restore();

        requestAnimationFrame(animateButterfly);
      }

      butterflyImg.onload = () => {
        animateButterfly();
      };

      //벚꽃 애니메이션
      const canvas = document.getElementById("sakura");
      const ctx = canvas.getContext("2d");
      let width = (canvas.width = window.innerWidth);
      let height = (canvas.height = window.innerHeight);

      window.addEventListener("resize", () => {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
      });

      const petalImages = ["./img/sakura01.png", "./img/sakura02.png"];
      const loadedImages = [];
      let imagesLoaded = 0;

      petalImages.forEach((src, i) => {
        const img = new Image();
        img.src = src;
        img.onload = () => {
          loadedImages[i] = img;
          imagesLoaded++;
          if (imagesLoaded === petalImages.length) startAnimation();
        };
      });

      const petals = [];
      const petalCount = 40;

      function createPetals() {
        for (let i = 0; i < petalCount; i++) {
          petals.push({
            x: Math.random() * width,
            y: Math.random() * height,
            size: Math.random() * 25 + 15,
            speedY: Math.random() * 1 + 0.5,
            speedX: Math.random() * 1 - 0.5,
            rotation: Math.random() * 360,
            rotationSpeed: Math.random() * 2 - 1,
            img: loadedImages[Math.floor(Math.random() * loadedImages.length)],
          });
        }
      }

      function drawPetals() {
        ctx.clearRect(0, 0, width, height);
        petals.forEach((p) => {
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate((p.rotation * Math.PI) / 180);
          ctx.drawImage(p.img, -p.size / 2, -p.size / 2, p.size, p.size);
          ctx.restore();

          p.y += p.speedY;
          p.x += p.speedX;
          p.rotation += p.rotationSpeed;

          if (p.y > height || p.x > width || p.x < -50) {
            p.y = -20;
            p.x = Math.random() * width;
          }
        });
      }

      function animate() {
        drawPetals();
        requestAnimationFrame(animate);
      }

      function startAnimation() {
        createPetals();
        animate();
      }

      //나뭇잎 애니메이션 섹션3

      const leafCanvas = document.getElementById("leaf");
      const leafCtx = leafCanvas.getContext("2d");
      let leafWidth = (leafCanvas.width = window.innerWidth);
      let leafHeight = (leafCanvas.height = window.innerHeight);

      window.addEventListener("resize", () => {
        leafWidth = leafCanvas.width = window.innerWidth;
        leafHeight = leafCanvas.height = window.innerHeight;
      });

      const leafImages = ["./img/leaf.png"];
      const loadedLeafImages = [];
      let leafImagesLoaded = 0;

      const leafCount = 15;
      const leaves = [];
      let showLeaves = false;

      leafImages.forEach((src, i) => {
        const img = new Image();
        img.src = src;
        img.onload = () => {
          loadedLeafImages[i] = img;
          leafImagesLoaded++;
          if (leafImagesLoaded === leafImages.length) {
            createLeaves();
            animateLeaves();
          }
        };
      });

      function createLeaves() {
        for (let i = 0; i < leafCount; i++) {
          leaves.push({
            x: Math.random() * leafWidth,
            y: Math.random() * leafHeight,
            size: Math.random() * 30 + 20,
            speedY: Math.random() * 1 + 0.5,
            speedX: Math.random() * 1 - 0.5,
            rotation: Math.random() * 360,
            rotationSpeed: Math.random() * 2 - 1,
            img: loadedLeafImages[
              Math.floor(Math.random() * loadedLeafImages.length)
            ],
          });
        }
      }

      function drawLeaves() {
        leafCtx.clearRect(0, 0, leafWidth, leafHeight);
        if (!showLeaves) return;

        leaves.forEach((leaf) => {
          leafCtx.save();
          leafCtx.translate(leaf.x, leaf.y);
          leafCtx.rotate((leaf.rotation * Math.PI) / 180);
          leafCtx.drawImage(
            leaf.img,
            -leaf.size / 2,
            -leaf.size / 2,
            leaf.size,
            leaf.size
          );
          leafCtx.restore();

          leaf.y += leaf.speedY;
          leaf.x += leaf.speedX;
          leaf.rotation += leaf.rotationSpeed;

          if (leaf.y > leafHeight || leaf.x > leafWidth || leaf.x < -50) {
            leaf.y = -20;
            leaf.x = Math.random() * leafWidth;
          }
        });
      }

      function animateLeaves() {
        drawLeaves();
        requestAnimationFrame(animateLeaves);
      }

      // 섹션 3에서만 보이도록
      const section3 = document.querySelector(".section:nth-child(3)");
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            showLeaves = entry.isIntersecting;
          });
        },
        { threshold: 0.3 }
      );
      observer.observe(section3);

      //섹션 3 클릭

      document
        .querySelectorAll(".project .project_list li")[0]
        .querySelector("p")
        .classList.add("active");

      const firstCon = document.querySelectorAll(".bottom .con")[0];
      firstCon.style.display = "flex";

      const firstLink = firstCon.querySelector(".link a");
      const firstImgBox = firstCon.querySelector(".img_box");

      firstLink.onmouseenter = () => firstImgBox.classList.add("bright");
      firstLink.onmouseleave = () => firstImgBox.classList.remove("bright");

      function resetTabs() {
        document.querySelectorAll(".project .project_list li").forEach((li) => {
          li.querySelector("p").classList.remove("active");
        });
        document.querySelectorAll(".bottom .con").forEach((con) => {
          con.style.display = "none";
        });
      }

      document
        .querySelectorAll(".project .project_list li")
        .forEach(function (v, k) {
          v.onclick = function (e) {
            e.preventDefault();
            resetTabs();
            v.querySelector("p").classList.add("active");
            const currentCon = document.querySelectorAll(".bottom .con")[k];
            currentCon.style.display = "flex";

            const link = currentCon.querySelector(".link a");
            const right = currentCon.querySelector(".img_box");

            link.onmouseenter = () => right.classList.add("bright");
            link.onmouseleave = () => right.classList.remove("bright");
          };
        });

      // 텍스트 애니메이션

      function animateWorkTextOnScroll() {
        const h3Spans = document.querySelectorAll(".title03 h3 span");
        h3Spans.forEach((el, i) => {
          if (i === 0) {
            el.classList.add("animate-left");
          } else {
            el.classList.add("animate-right");
          }
        });
      }

      //타이핑 효과

      function typeText(element, text, speed = 100, callback) {
        let i = 0;
        element.innerHTML = "";
        element.classList.add("active");
        element.classList.remove("done");

        const interval = setInterval(() => {
          element.textContent += text.charAt(i);
          i++;
          if (i >= text.length) {
            clearInterval(interval);
            element.classList.remove("active");
            element.classList.add("done");
            if (callback) callback();
          }
        }, speed);
      }

      function typeAllParagraphs() {
        const paragraphs = document.querySelectorAll(".txt .typing");
        let current = 0;

        function typeNext() {
          if (current >= paragraphs.length) return;

          const el = paragraphs[current];
          const text = el.getAttribute("data-text");

          // 모든 줄에서 active 제거
          paragraphs.forEach((p) => p.classList.remove("active"));

          typeText(el, text, 120, () => {
            current++;
            setTimeout(typeNext, 400);
          });
        }

        typeNext();
      }

      function handleScrollTyping() {
        const target = document.querySelector(".txt");
        let hasAnimated = false;

        function check() {
          const rect = target.getBoundingClientRect();
          if (
            !hasAnimated &&
            rect.top < window.innerHeight &&
            rect.bottom > 0
          ) {
            hasAnimated = true;
            typeAllParagraphs();
          }
          if (hasAnimated && rect.bottom < 0) {
            hasAnimated = false;
            document.querySelectorAll(".txt .typing").forEach((p) => {
              p.textContent = "";
              p.classList.remove("done");
            });
          }
        }
        check();
        // window.addEventListener("scroll", check);
        //window.addEventListener("load", check);
      }
    </script>
  </body>
</html>
